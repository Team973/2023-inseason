(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1086:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9820)}])},9820:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ez}});var r=t(2322),s=t(2784),l=t(7729),i=t.n(l),c=t(6770),a=t(7565),o=t(6432),u=t(7550),d=t(2590),x=t(5665),h=t(2197),f=t(5801),j=t(6617),p=t(6897),m=t(6549),b=t(3091),g=t(5971),Z=t(7663),y=t(2048),N=t(6277),v=t(5632),T=t(9097),_=t.n(T),C=t(3119),w=t(5992);let k=(0,w.ZP)("a")({}),S=(0,s.forwardRef)(function(e,n){let{to:t,linkAs:s,replace:l,scroll:i,shallow:c,prefetch:a,legacyBehavior:o=!0,locale:u,...d}=e;return(0,r.jsx)(_(),{href:t,prefetch:a,as:s,replace:l,scroll:i,shallow:c,passHref:!0,locale:u,legacyBehavior:o,children:(0,r.jsx)(k,{ref:n,...d})})}),D=(0,s.forwardRef)(function(e,n){let{activeClassName:t="active",as:s,className:l,href:i,legacyBehavior:c,linkAs:a,locale:o,noLinkStyle:u,prefetch:d,replace:x,role:h,scroll:f,shallow:j,...p}=e,m=(0,v.useRouter)(),b="string"==typeof i?i:i.pathname,g=(0,N.Z)(l,{[t]:m.pathname===b&&t}),Z="string"==typeof i&&(0===i.indexOf("http")||0===i.indexOf("mailto:"));if(Z)return u?(0,r.jsx)(k,{className:g,href:i,ref:n,...p}):(0,r.jsx)(C.Z,{className:g,href:i,ref:n,...p});let y={to:i,linkAs:a||s,replace:x,scroll:f,shallow:j,prefetch:d,legacyBehavior:c,locale:o};return u?(0,r.jsx)(S,{className:g,ref:n,...y,...p}):(0,r.jsx)(C.Z,{component:S,className:g,ref:n,...y,...p})});var E=function(e){let{open:n,onClose:t}=e,s=()=>{t()};return(0,r.jsxs)(b.Z,{open:n,onClose:s,children:[(0,r.jsx)(Z.Z,{children:"GreyDash Help"}),(0,r.jsxs)(Z.Z,{children:["Connecting to the Robot:",(0,r.jsxs)("ol",{children:[(0,r.jsx)("li",{children:"Connect to the robot's network or FMS."}),(0,r.jsx)("li",{children:'If the dashboard doesn\'t automatically connect, make sure the "Server Address" field has the correct value.'}),(0,r.jsx)("ul",{children:(0,r.jsx)("li",{children:"If you are unsure, you can also put the robot's team number in the field"})}),(0,r.jsx)("li",{children:"Try clicking the connect button again."})]}),"Development:",(0,r.jsx)("br",{}),"More information can be found at"," ",(0,r.jsx)(D,{href:"https://github.com/Team973/greybots-skeleton/blob/master/docs/DashboardGuide.md",children:"this guide"}),"."]}),(0,r.jsx)(g.Z,{children:(0,r.jsx)(y.Z,{autoFocus:!0,onClick:s,children:"Close"})})]})},G=t(8388),I=t(6537),M=t(1066),z=t(5262),A=function(){let[e,n]=(0,s.useState)(!0),[t,l]=(0,s.useState)(!1),[i,c]=(0,s.useState)(""),[a,o]=(0,s.useState)(5810),[d,x]=(0,s.useState)(!1),h=(0,z.useNTCore)(),f=e=>{"Escape"==e.key&&(null==h||h.client.messenger.socket.stopAutoConnect(),l(!0),n(!1))},j=()=>{x(!0)},p=()=>{x(!1)},m=()=>{null==h||h.changeURI(i,a)};return(0,s.useEffect)(()=>{if(!h)return;c(h.getURI());let e=h.addRobotConnectionListener(e=>{t||(e?n(!1):n(!0))},!0);return()=>{e()}},[h,t]),(0,r.jsx)(G.Z,{sx:{color:"#fff",backgroundColor:"rgb(0,0,0,0.85)",zIndex:e=>e.zIndex.drawer+1},open:e,onKeyDown:f,tabIndex:0,children:(0,r.jsxs)(M.Z,{spacing:2,direction:"column",className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-3xl",children:"Connect to the robot"}),(0,r.jsxs)(M.Z,{spacing:2,direction:"row",children:[(0,r.jsx)(I.Z,{variant:"outlined",label:"Server Address",type:"url",onChange:e=>c(e.target.value),value:i}),(0,r.jsx)(I.Z,{variant:"outlined",label:"Port",type:"number",onChange:e=>o(Number(e.target.value)),value:a,sx:{width:90}}),(0,r.jsx)(y.Z,{variant:"contained",onClick:m,children:"Connect"})]}),(0,r.jsx)(u.Z,{children:(0,r.jsx)(y.Z,{onClick:j,variant:"outlined",children:"Need Help?"})}),(0,r.jsx)(E,{open:d,onClose:p})]})})},P=t(5237),R=t.n(P);let L=R()(()=>Promise.resolve().then(t.bind(t,5262)).then(e=>e.NTCoreProvider),{loadableGenerated:{webpack:()=>[5262]},ssr:!1});var F=function(e){let n=(0,o.Z)("(prefers-color-scheme: dark)"),t=(0,s.useMemo)(()=>(0,c.Z)({palette:{primary:{main:"#E07226"},secondary:{main:"#515355"},mode:n?"dark":"light"}}),[n]),[l,b]=(0,s.useState)(!1),g=()=>{b(!0)},Z=()=>{b(!1)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(L,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"GreyDash"})}),(0,r.jsx)(a.Z,{theme:t,children:(0,r.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,r.jsx)(d.ZP,{}),(0,r.jsx)(p.Z,{position:"absolute",children:(0,r.jsxs)(x.Z,{sx:{pr:"24px"},children:[(0,r.jsxs)(h.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},className:"flex items-center",children:[(0,r.jsxs)("picture",{className:"mr-1 p-1",children:[(0,r.jsx)("source",{srcSet:"/973.png",type:"image/png"}),(0,r.jsx)("img",{src:"/973.png",className:"h-12 self-center",alt:"Team 973 Logo"})]}),"GreyDash v2023"]}),(0,r.jsx)(f.Z,{onClick:g,children:(0,r.jsx)(m.Z,{})}),(0,r.jsx)(E,{open:l,onClose:Z})]})}),(0,r.jsxs)(u.Z,{component:"main",sx:{flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,r.jsx)(x.Z,{}),(0,r.jsx)(A,{}),(0,r.jsx)(j.Z,{maxWidth:!1,sx:{mt:1},children:e.children})]})]})})]})})},B=t(7377),O=t(9123),V=t(2841),W=t(2531),H=t(5203),U=t(7806),q=t.n(U),J=function(){let[e,n]=(0,s.useState)(""),[t,l]=(0,s.useState)(!1),i=(0,z.useNTCore)();return(0,s.useEffect)(()=>{if(!i)return;let t=null==i?void 0:i.addRobotConnectionListener(t=>{if(t){let t="http://"+i.getURI()+":1181/stream.mjpg";e!==t&&n(t)}},!0);return()=>{t()}},[i,e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:e?t?(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{src:"/973shadow.png",alt:"973 Gears",className:"object-scale-down"}),(0,r.jsx)("h1",{className:"text-font-bold text-[#121212] text-center text-6xl "+q().depth,children:"No Camera Connection"})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("img",{src:e,onError:()=>l(!0),alt:"Camera Source",className:"object-contain"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-2xl pr-5",children:"Waiting for stream..."}),(0,r.jsx)(V.Z,{})]})}),(0,r.jsx)(W.Z,{color:"primary","aria-label":"add",onClick:function(){e&&n(e+"?"+Date.now())},children:(0,r.jsx)(H.Z,{})})]})},X=t(4797),K=t.n(X),Q=t(8546),Y=function(e){let[n,t]=(0,s.useState)(0),l=(0,z.useNTCore)();(0,s.useEffect)(()=>{if(!l)return;let e=e=>{null!==e&&t(e)},n=l.createTopic("/GreyDash/gyro/angle",Q.NetworkTableTypeInfos.kDouble),r=n.subscribe(e);return()=>{n.unsubscribe(r)}},[l]);let i=(n%360+360)%360;return(0,r.jsx)(B.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:240},className:K().gyro,onClick:function(){let e=null==l?void 0:l.createTopic("/GreyDash/gyro/reset",Q.NetworkTableTypeInfos.kBoolean);null==e||e.publish(),null==e||e.setValue(!0)},children:(0,r.jsxs)("svg",{className:K().compass,viewBox:"0 0 100 100",width:"100%",height:"100%",children:[(0,r.jsx)("circle",{className:K().circle,cx:"50",cy:"50",r:"45"}),(0,r.jsx)("line",{x1:"50",y1:"50",x2:"50",y2:"5",className:K().needle,transform:"rotate(-".concat(i,", 50, 50)")}),(0,r.jsxs)("text",{x:"50",y:"80",textAnchor:"middle",dominantBaseline:"central",className:K().angle,children:[i,"\xb0"]})]})})},$=function(e){return(0,r.jsx)("img",{className:"max-h-full",src:"/GreyDash.svg",alt:"GreyDash Icon"})},ee=t(4713),en=t.n(ee),et=function(){let[e,n]=(0,s.useState)("--:--"),[t,l]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[a,o]=(0,s.useState)(!1),u=(0,z.useNTCore)();return(0,s.useEffect)(()=>{if(!u)return;let e=e=>{null!==e&&function(e){if(e>0&&o(!0),e<0){a?(c(en().timerEnd),n("0.0")):n("--:--");return}e<10?c(en().timer10):e<30?c(en().timerLow):c("");let t=Math.floor(e/60),r=Math.floor(e%60);t>0?n("".concat(t,":").concat(r<10?"0":"").concat(r)):n("".concat(e.toFixed(1)))}(e)},t=e=>{null!==e&&l(e)},r=u.createTopic("/GreyDash/match/time",Q.NetworkTableTypeInfos.kDouble),s=u.createTopic("/GreyDash/match/mode",Q.NetworkTableTypeInfos.kString);console.log("subscribing timer topics");let i=r.subscribe(e,!0,{periodic:.01}),d=s.subscribe(t,!0);return()=>{console.log("unsubscribing timer topics"),r.unsubscribe(i),s.unsubscribe(d)}},[u,a]),(0,r.jsxs)(B.Z,{sx:{p:2,display:"flex",flexDirection:"column",justifyContent:"center",height:240},className:i,children:[(0,r.jsx)("span",{className:"text-[5vw] text-center",children:e}),(0,r.jsx)("span",{className:"text-[2vw] text-center",children:t})]})},er=t(6004),es=t.n(er),el=function(){let[e,n]=(0,s.useState)(!1),t=(0,z.useNTCore)(),[l,i]=(0,s.useState)(es().disconnected);return(0,s.useEffect)(()=>{if(!t)return;let r=t.addRobotConnectionListener(t=>{e!==t&&n(t),i(e?es().connected:es().disconnected)},!0);return()=>{r()}},[t,e]),(0,r.jsx)(B.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:240},className:l,children:(0,r.jsx)("span",{className:"text-center text-3xl font-bold align-middle",children:e?"CONNECTED":"NOT CONNECTED"})})},ei=t(7527),ec=t(8110),ea=t(9506),eo=t(9980),eu=t(4196),ed=t.n(eu),ex=function(){let[e,n]=(0,s.useState)(null),[t,l]=(0,s.useState)(""),[i,c]=(0,s.useState)(!1),a=(0,z.useNTCore)(),o=(0,s.useRef)(),u=e=>{let n=e.target.value;l(n),o.current&&o.current.setValue(n)};return(0,s.useEffect)(()=>{if(!a)return;let e=a.addRobotConnectionListener(c,!1),t=a.createTopic("/GreyDash/auto/availableModes",Q.NetworkTableTypeInfos.kStringArray,[]),r=t.subscribe(e=>{console.log(e),n(e)});o.current=a.createTopic("/GreyDash/auto/selectedMode",Q.NetworkTableTypeInfos.kString),o.current.publish();let s=o.current.getValue();return s&&l(s),()=>{var n;t.unsubscribe(r),null===(n=o.current)||void 0===n||n.unpublish(),e()}},[a]),(0,r.jsxs)(ea.Z,{fullWidth:!0,children:[(0,r.jsxs)(ei.Z,{className:"flex items-center",children:[i?"Auto Mode":"Loading autos",!i&&(0,r.jsx)(V.Z,{className:ed().spinner,size:18})]}),(0,r.jsx)(eo.Z,{value:t,label:"Auto Mode",onChange:u,disabled:!i,children:null==e?void 0:e.map(e=>(0,r.jsx)(ec.Z,{value:e,children:e},e))})]})},eh=function(e){return(0,r.jsxs)(O.Z,{container:!0,spacing:2,sx:{p:0},children:[(0,r.jsx)(O.Z,{xs:12,md:8,lg:9,className:"h-full",children:(0,r.jsx)(B.Z,{sx:{p:2,display:"flex",flexDirection:"column",position:"relative",height:"100vh"},children:(0,r.jsx)(J,{})})}),(0,r.jsx)(O.Z,{spacing:2,xs:12,md:4,lg:3,children:(0,r.jsxs)(O.Z,{container:!0,spacing:2,sx:{p:0},children:[(0,r.jsx)(O.Z,{xs:6,children:(0,r.jsx)(Y,{})}),(0,r.jsx)(O.Z,{xs:6,children:(0,r.jsx)(B.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:(0,r.jsx)($,{})})}),(0,r.jsx)(O.Z,{xs:6,children:(0,r.jsx)(et,{})}),(0,r.jsx)(O.Z,{xs:6,children:(0,r.jsx)(el,{})}),(0,r.jsx)(O.Z,{xs:6,children:(0,r.jsx)(B.Z,{sx:{p:2,display:"flex",flexDirection:"column",justifyContent:"center",height:240},children:(0,r.jsx)(ex,{})})})]})})]})},ef=t(195);let ej=ef.z.object({name:ef.z.string(),seriesMap:ef.z.record(ef.z.string(),ef.z.object({index:ef.z.number().int(),latestValue:ef.z.number(),timestamp:ef.z.number()}))}),ep=R()(()=>Promise.all([t.e(584),t.e(842)]).then(t.bind(t,3109)),{loadableGenerated:{webpack:()=>[3109]},ssr:!1}),em=e=>{let[n,t]=(0,s.useState)([]),[l,i]=(0,s.useState)({title:e.chartTitle,height:300,plot_bgcolor:"#000",paper_bgcolor:"#000",font:{color:"#fff"},xaxis:{zeroline:!0,type:"date",tickcolor:"#fff",zerolinecolor:"#fff",gridcolor:"#bdbdbd"},yaxis:{gridcolor:"#bdbdbd",tickcolor:"#fff"},margin:{l:50,r:50,b:50,t:50}}),[c,a]=(0,s.useState)(null),o=(0,z.useNTCore)();return(0,s.useEffect)(()=>{if(!o)return;let n=(e,n,r,s)=>{let l=new Date(s);t(t=>(t[n]?t[n]={...t[n],x:[...t[n].x,l],y:[...t[n].y,r]}:t[n]={x:[l],y:[r],type:"scatter",mode:"lines",name:e},i(e=>({...e,xaxis:{...e.xaxis,range:[l.setMinutes(l.getMinutes()-1),l.setMinutes(l.getMinutes()+1)]}})),t))},r=o.createTopic(e.chartTable,Q.NetworkTableTypeInfos.kString),s=r.subscribe(e=>{if(e){let t=JSON.parse(e),r=ej.parse(t);for(let e in r.seriesMap){let{index:t,latestValue:s,timestamp:l}=r.seriesMap[e];n(e,t,s,l)}}});return()=>{r.unsubscribe(s)}},[o,e.chartTable]),(0,r.jsx)(ep,{data:n,layout:l,frames:null!=c?c:void 0,config:{responsive:!0},onInitialized:e=>{t(e.data),i(e.layout),a(e.frames)}})},eb=()=>{let[e,n]=(0,s.useState)([]),t=(0,z.useNTCore)();(0,s.useEffect)(()=>{if(!t)return;let e=t.createTopic("/GreyDash/charts/list",Q.NetworkTableTypeInfos.kStringArray),r=e.subscribe(e=>{e&&n(e)});return()=>{e.unsubscribe(r)}},[t]);let l=(0,s.useMemo)(()=>e.map(e=>(0,r.jsx)(em,{chartTitle:e,chartTable:"/GreyDash/charts/".concat(e)},e)),[e]);return(0,r.jsx)(r.Fragment,{children:l})};var eg=function(e){return(0,r.jsxs)(O.Z,{container:!0,spacing:2,children:[(0,r.jsx)(O.Z,{xs:12,md:8,lg:9,children:(0,r.jsx)(B.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:720},children:(0,r.jsx)(eb,{})})}),(0,r.jsx)(O.Z,{spacing:2,xs:12,md:4,lg:3,children:(0,r.jsxs)(O.Z,{container:!0,spacing:2,sx:{p:0},children:[(0,r.jsx)(O.Z,{xs:6,children:(0,r.jsx)(Y,{})}),(0,r.jsx)(O.Z,{xs:6,children:(0,r.jsx)(el,{})})]})})]})},eZ=t(6973),ey=t(8206),eN=t(1511),ev=t(5485),eT=t(4254),e_=t(6284),eC=function(e){let n=[];for(let e=0;e<10;e++)n.push("--");return(0,r.jsx)(O.Z,{children:(0,r.jsx)(eN.Z,{component:B.Z,children:(0,r.jsxs)(ev.Z,{children:[(0,r.jsx)(eT.Z,{children:(0,r.jsxs)(eZ.Z,{children:[(0,r.jsx)(ey.Z,{children:"DB/String 0"}),(0,r.jsx)(ey.Z,{children:"DB/String 5"})]})}),(0,r.jsx)(e_.Z,{children:function(){let e=[];for(let t=0;t<5;t++)e.push((0,r.jsxs)(eZ.Z,{children:[(0,r.jsx)(ey.Z,{children:n[t]},"db-row-"+t),(0,r.jsx)(ey.Z,{children:n[t+5]},"db-row-"+(t+5))]},"db-row-"+t));return e}()})]})})})},ew=function(e){let{children:n,value:t,index:s,...l}=e;return(0,r.jsx)("div",{role:"tabpanel",className:"w-full",hidden:t!==s,id:"vertical-tabpanel-".concat(s),"aria-labelledby":"vertical-tab-".concat(s),...l,children:t===s&&(0,r.jsx)(u.Z,{sx:{p:2,pr:0},children:n})})},ek=t(518),eS=t(6812),eD=t(5410),eE=t(8484),eG=t(8287);function eI(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}let eM=()=>{let[e,n]=(0,s.useState)(0),t=(e,t)=>{n(t)};return(0,r.jsxs)(u.Z,{sx:{flexGrow:1,bgcolor:"background.paper",display:"flex",height:"100%"},children:[(0,r.jsxs)(eE.Z,{orientation:"vertical",value:e,onChange:t,"aria-label":"Vertical tabs example",sx:{borderRight:1,borderColor:"divider"},children:[(0,r.jsx)(eG.Z,{label:"Driver",icon:(0,r.jsx)(ek.Z,{}),...eI(0)}),(0,r.jsx)(eG.Z,{label:"Debug",icon:(0,r.jsx)(eS.Z,{}),...eI(1)}),(0,r.jsx)(eG.Z,{label:"DB Table",icon:(0,r.jsx)(eD.Z,{}),...eI(2)})]}),(0,r.jsx)(ew,{value:e,index:0,children:(0,r.jsx)(eh,{})}),(0,r.jsx)(ew,{value:e,index:1,children:(0,r.jsx)(eg,{})}),(0,r.jsx)(ew,{value:e,index:2,children:(0,r.jsx)(eC,{})})]})};eM.getLayout=e=>(0,r.jsx)(F,{children:e});var ez=eM},5262:function(e,n,t){"use strict";t.r(n),t.d(n,{NTCoreContext:function(){return i},NTCoreProvider:function(){return c},useNTCore:function(){return a}});var r=t(2322),s=t(2784),l=t(8546);let i=(0,s.createContext)(null);function c(e){let{children:n}=e,[t,c]=(0,s.useState)(null);return(0,s.useEffect)(()=>{c(l.NetworkTables.createInstanceByTeam(973))},[]),(0,r.jsx)(i.Provider,{value:t,children:n})}function a(){return(0,s.useContext)(i)}},4196:function(e){e.exports={spinner:"auto-selector_spinner__LArPl"}},7806:function(){},6004:function(e){e.exports={connected:"connection-indicator_connected__Z3a2L",disconnected:"connection-indicator_disconnected__eWHlA","flash-danger":"connection-indicator_flash-danger__T2F64"}},4797:function(e){e.exports={gyro:"gyro_gyro__cs4PU",compass:"gyro_compass__vJvWz",circle:"gyro_circle__NdieA",needle:"gyro_needle__kjqAV",angle:"gyro_angle__Peuv0"}},4713:function(e){e.exports={timerLow:"timer_timerLow__e5qf6",timer10:"timer_timer10__3Duyo","flash-warning":"timer_flash-warning__TYwC5",timerEnd:"timer_timerEnd__s2nQp"}}},function(e){e.O(0,[379,774,888,179],function(){return e(e.s=1086)}),_N_E=e.O()}]);